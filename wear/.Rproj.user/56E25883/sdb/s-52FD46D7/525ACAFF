{
    "contents" : "#' Physical Activity Summary\n#'\n#' Summarize activity measures\n#' @param final.dat cleaned final data that is between record getup time and sleep time\n#' @param record.sleep.time Log file of sleep time\n#' @param record.getup.time Log file of getup time\n#' @param ll the id of getup time record\n#' @return hours.worn.total Total worn hours\n#' @return hours.awake    Total awake hours\n#' @return sed.hour  Total sedantary hours\n#' @return ... ...\n#' @examples  data(sample);PA_summary(sample) \n#' @export\nPA_summary=function (final.dat) {\n  library(reldist)\n  temp.mat=final.dat\n  \n  ###################################################\n  #time.char<-as.POSIXlt(record.getup.time[ll]*24*60*60, origin = ISOdatetime(1899,12,30,0,0,0))\n  hour.char<-as.numeric(format(as.POSIXlt(temp.mat$date.time*24*60*60, origin = ISOdatetime(1899,12,30,0,0,0)),\"%H\"))\n  ###\n  temp.sed<-subset(temp.mat,temp.mat$ActivityCode==0)$Interval\n  length.temp.sed<-length(temp.sed)\n#   month<-as.numeric(format(time.char,\"%m\"))\n#   day<-as.numeric(format(time.char,\"%d\"))\n#   year<-as.numeric(format(time.char,\"%Y\"))\n  hours.worn.total<- sum(temp.mat$Interval)/60/60\n  #hours.awake<- (record.sleep.time[ll]-record.getup.time[ll])*24\n  sed.hour<- sum(temp.sed) /60/60\n  stand.hour<- sum(subset(temp.mat,temp.mat$ActivityCode==1)$Interval) /60/60\n  step.hour<- sum(subset(temp.mat,temp.mat$ActivityCode==2)$Interval) /60/60\n  num.changes.from.sed.to.non.sed<- length.temp.sed\n  ######## Code update here !\n  step.count.total<- 2*nrow(subset(temp.mat,temp.mat$ActivityCode==2))  ##### in the event file, one row with ActivityCode==2 means two steps\n  ########\n  gini.index<- gini(temp.sed)\n  num.hour.over.3.METs<-  sum(temp.mat$Interval[(temp.mat$METs/temp.mat$Interval)*60*60>3])/60/60\n  MET.hours<- sum(temp.mat$METs)\n  #valid.day<-ifelse( (hours.worn.total<10 & hours.worn.total/hours.awake>0.8 & step.count.total>200) | (hours.worn.total>=10 & step.count.total>200 ),1,0    )\n  #dayofweek<-as.numeric(format(time.char,\"%w\"))\n  #weekday.or.weekend<- ifelse( dayofweek!=0 & dayofweek!=6,1,0)\n  #table1<-c(person,group.char,www,month,day,year,hours.worn.total,hours.awake,sed.hour,stand.hour,step.hour,num.changes.from.sed.to.non.sed,step.count.total,gini.index,num.hour.over.3.METs,MET.hours,valid.day,dayofweek,weekday.or.weekend)\n  table1<-cbind(hours.worn.total,sed.hour,stand.hour,step.hour,num.changes.from.sed.to.non.sed,step.count.total,gini.index,num.hour.over.3.METs,MET.hours)\n  colnames(table1)<-c(\"hours.worn.total\",\"sed.hour\",\"stand.hour\",\"step.hour\",\"num.changes.from.sed.to.non.sed\",\"step.count.total\",\"gini.index\",\"num.hour.over.3.METs\",\"MET.hours\")\n  \n  out=list(  temp.mat= temp.mat,temp.sed= temp.sed,length.temp.sed=length.temp.sed,hour.char=hour.char, step.count.total= step.count.total,hours.worn.total=hours.worn.total, sed.hour=sed.hour, stand.hour=stand.hour, step.hour=step.hour, num.changes.from.sed.to.non.sed=num.changes.from.sed.to.non.sed, gini.index=gini.index,num.hour.over.3.METs=num.hour.over.3.METs,MET.hours=MET.hours,table1=table1)\n  \n #table1.label<-c(\"id\",\"group\",\"week\",\"month\",\"day\",\"year\",\"hours.worn.total\",\"hours.awake\",\"sed.hour\",\"stand.hour\",\"step.hour\",\"num.changes.from.sed.to.non.sed\",\"step.count.total\",\"gini.index\",\"num.hour.over.3.METs\",\"MET.hours\",\"valid.day\",\"dayofweek\",\"weekday.or.weekend\")\n  #num.hour.over.3.METs=num.hour.over.3.METs\n  return(out)\n}",
    "created" : 1449811016709.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1391834948",
    "id" : "525ACAFF",
    "lastKnownWriteTime" : 1449811024,
    "path" : "~/wear/R/PA_summary.R",
    "project_path" : "R/PA_summary.R",
    "properties" : {
    },
    "relative_order" : 5,
    "source_on_save" : false,
    "type" : "r_source"
}